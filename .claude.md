# Elide Conversion Project - Autonomous Learning Log

## Mission
Convert 10-20 open-source projects to use Elide runtime, creating showcase examples for Elide 1.0 release.

## Conversion Count: 0/20

##  Elide Installation & Setup (CRITICAL - REFERENCE THIS!)

### Installation Method (Network-limited environment)
```bash
# Download from GitHub releases
curl -L -o elide.tgz "https://github.com/elide-dev/elide/releases/download/1.0.0-beta10/elide-1.0.0-beta10-linux-amd64.tgz"
tar -xzf elide.tgz
cp elide-1.0.0-beta10-linux-amd64/elide /usr/local/bin/
chmod +x /usr/local/bin/elide
elide --version  # Should show: 1.0.0-beta10
```

**Location**: `/usr/local/bin/elide`
**Version**: 1.0.0-beta10

### Environment Setup
- **GraalVM 25.0.1** installed at `/opt/graalvm-jdk-25`
- **Gradle 8.14.3** at `/opt/gradle/bin/gradle`
- **Java 25.0.1** (Oracle GraalVM)

### Elide Commands Reference

**Run Code** (no build needed!):
```bash
elide ./file.{js,ts,jsx,tsx,py,kts,kt}
elide run ./file.js
elide repl  # Interactive shell
```

**Project Management**:
```bash
elide init                    # Initialize new project
elide project [...]           # Manage projects
elide install / elide i       # Install dependencies
elide add <package>           # Add dependency
```

**Build & Test**:
```bash
elide build                   # Build project (generates native binary!)
elide test                    # Run tests
elide check / elide lint      # Linting
```

**Toolchain** (elide can replace these tools):
```bash
elide javac -- [OPTIONS]      # Java compiler
elide kotlinc -- [OPTIONS]    # Kotlin compiler
elide jar / elide javadoc     # JAR tools
elide native-image            # Native compilation
elide jib                     # Container images
elide pkl                     # Pkl tools
```

**Polyglot Features**:
- Mix JS/TS/Python/Kotlin in same project
- Zero-overhead cross-language calls
- Single runtime for all languages

### Key Elide Concepts

**Project Manifest** (`elide.pkl`):
- Like `package.json` but using Apple's Pkl language
- Declarative dependency management
- Supports npm, Maven, PyPI simultaneously

**Lockfiles**:
- Elide has its own lockfile system
- Use `--frozen` flag for CI/deterministic builds
- Use `--no-lockfile` to disable

**Native Compilation**:
- `elide build` can produce native binaries
- Instant startup (<5ms vs ~200ms for Node)
- Single distributable file

## Key Learnings (Updated After Each Conversion)

### Elide Beta10 Limitations Discovered (VALIDATED)

**Issue #1: Elide's npm installer (orogene) has network/install issues**
- **Symptom**: `elide install` fails with "Orogene invocation failed with exit code 1"
- **Workaround**: Use pnpm/npm to install dependencies, Elide can use them from node_modules
- **Status**: NOT an Elide bug - can work around by using standard package managers
- **Tested**: `pnpm install` works, Elide successfully finds and uses node_modules

**Issue #2: Limited package.json "exports" field support**
- **Error**: `TypeError: Unsupported package exports: 'restore-cursor'`
- **Cause**: Elide beta10 doesn't fully support modern Node.js package.json "exports" field
- **Impact**: Many modern npm packages (like restore-cursor@5) cannot be imported
- **Status**: Real limitation of beta10
- **Tested**: restore-cursor fails, semver works (doesn't use exports)

**Issue #3: Incomplete Node.js events module**
- **Error**: `The requested module 'events' does not provide an export named 'EventEmitter'`
- **Cause**: Elide's Node API polyfill incomplete for events module
- **Impact**: Packages depending on EventEmitter (like cac) fail
- **Status**: Real limitation of beta10

**What WORKS in Elide Beta10:**
✅ TypeScript execution (no build needed!)
✅ Node.js path/fs APIs
✅ npm packages WITHOUT exports field (e.g., semver)
✅ Using pnpm/npm installed node_modules
✅ Basic ES modules and imports

### Conversion Patterns

**Successful Pattern** (to be validated):
1. Start with simple projects (single-file, few deps)
2. Create `elide.pkl` with proper Pkl syntax:
   ```pkl
   packages {
     "package@version"  // NOT "package" = "version"
   }
   ```
3. Remove existing `package.json` to avoid parsing conflicts
4. Run `elide install`
5. Test with `elide run script.ts`

**Failed Pattern**:
- Converting existing complex npm projects with many dependencies
- Projects with custom package.json fields

### Common Pitfalls
1. Using `key = "value"` syntax in Pkl (should be just `"package@version"`)
2. Leaving existing `package.json` in place
3. Assuming npm dependency installation works like npm/pnpm

### Time Estimates
- TBD (need successful conversion first!)

## Project Selection Criteria (Refined)

### Ideal Candidates ✅
- Node.js/TypeScript CLIs or APIs (show native compilation benefits)
- Polyglot projects (showcase zero-overhead language interop)
- Apps with slow cold starts (demonstrate instant startup)
- Projects with complex Docker setups (replace with single binary)
- Data processing tools (show performance gains)

### Avoid ❌
- Browser-only apps
- Projects deeply coupled to Node.js internals (fs, crypto edge cases)
- Massive monorepos (too complex for showcase)
- Abandoned projects (want active communities to see Elide benefits)

## Conversion Workflow Template

1. **Discovery** (5 min)
   - Find candidate on GitHub
   - Verify: stars >500, active, good fit for Elide
   - Check license (permissive)

2. **Analysis** (10 min)
   - Understand tech stack
   - Identify conversion complexity
   - List required Elide features

3. **Setup** (5 min)
   - Clone locally to /home/user/conversions/[project-name]
   - Create tracking doc

4. **Conversion** (30-60 min)
   - Add elide.yaml manifest
   - Convert build configs
   - Refactor if needed
   - Test builds

5. **Documentation** (10 min)
   - Create ELIDE_CONVERSION.md
   - Update README

6. **Git Operations** (5 min)
   - Commit with clear message
   - Push to akapug fork (or save locally if auth issues)

7. **Learning Capture** (5 min)
   - Update this file with lessons

**Target: 75-90 min per project**

## Projects Converted

### Project #1: [TBD]
- **Original Stack**:
- **Elide Benefits**:
- **Conversion Time**:
- **Challenges**:
- **Status**:
- **Location**:

---

## Meta Notes
- Started: 2025-11-05
- Credits Available: ~250x initial analysis cost (~4M+ tokens)
- Goal: Maximize real-world Elide showcases before credit depletion
