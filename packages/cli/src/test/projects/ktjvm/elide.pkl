amends "elide:Project.pkl"

name = "elide-test-ktjvm"
description = "Example project using Elide with Kotlin/JVM."

entrypoint {
  "src/main/kotlin/main.kt"
}

dependencies {
  maven {
    catalogs {
      "gradle/libs.versions.toml"
    }
    packages {
      // KotlinX HTML (https://github.com/Kotlin/kotlinx.html)
      "org.jetbrains.kotlinx:kotlinx-html:0.12.0"

      // Guava
      "com.google.guava:guava:33.4.8-jre"
    }
    repositories {
      ["elide"] = "https://maven.elide.dev"
    }
  }
}

// dev {
//   ci = (github.actions) {
//     workflows {
//       // Main Workflow: Build
//       ["build"] = new {
//         security {
//           disableSudo = false
//         }
//         permissions {
//           contents = "read"
//         }
//         jobs {
//           // ---- Job: API Check -------------------------
//           ["api-check"] = new {
//             name = "API Check"
//             runsOn = "ubuntu-latest"
//             steps {
//               new {
//                 name = "Analysis: API Check"
//                 run = """
//                   ./gradlew -Pelide.abiValidate=true apiCheck \\
//                     -x test \\
//                     -x nativeCompile \\
//                     -x nativeOptimizedCompile \\
//                     -x :packages:graalvm:buildThirdPartyNatives \\
//                     -x :packages:graalvm:buildRustNativesForHost \\
//                     -x :packages:graalvm:natives \\
//                     --no-configuration-cache
//                 """
//               }
//             }
//           }
//         }
//       }
//     }
//   }
// }

sources {
  ["main"] = "src/main/kotlin/**/*.kt"
  ["test"] = "src/test/kotlin/**/*.kt"
}
