/// Describes project infrastructure configurations.
@ModuleInfo { minPklVersion = "0.28.1" }
module elide.secrets

import "Base.pkl" as common

/// Typealias for shared secrets path.
typealias ProjectSecretsPath = common.FilePath

/// Settings for storing shared secrets within committed project files.
class ProjectRemoteSettings {
  /// Path to the shared secrets, relative to the project path.
  path: ProjectSecretsPath?
}

/// Typealias for github repository.
typealias GithubRepository = String

/// Settings for using GitHub as a remote.
class GithubRemoteSettings {
  /// Identity of the repository to be used.
  repository: GithubRepository?
}

/// Typealias for secret profile
typealias SecretProfile = String

/// Typealias for selected remote
typealias Remote = "project" | "github"

/// Secrets settings and configurations.
class SecretsSettings {
  /// Profile to be used with secrets.
  profile: SecretProfile?

  /// Remote to be used to share secrets
  remote: Remote?

  /// Project remote settings
  project: ProjectRemoteSettings?

  /// GitHub remote settings
  github: GithubRemoteSettings?
}
